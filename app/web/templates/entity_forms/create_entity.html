
    <form id="createEntityForm">

        <div class="card shadow-sm border-0 rounded-3 mb-4">
            <div class="card-body p-2">
                <h4 class="mb-1 text-primary">Создать профиль</h4>
                <ul class="list-group list-group-flush">
                    <li class="list-group-item d-flex justify-content-between align-items-center p-1">
                        <label class="form-label fw-semibold me-4">Название:</label>
                        <input class="form-control form-control-sm ms-auto" type="text" id="entity_name_c" name="entity_name_c" required>
                    </li>
                    <li class="list-group-item d-flex justify-content-between align-items-center p-1">
                        <label class="form-label fw-semibold me-4">Телефон:</label>
                        <input class="form-control form-control-sm ms-auto" type="text" id="entity_phone_c" name="entity_phone_c" required>
                    </li>
                    <li class="list-group-item d-flex justify-content-between align-items-center p-1">
                        <label class="form-label fw-semibold me-4">Адрес:</label>
                        <input class="form-control form-control-sm ms-auto" type="text" id="entity_address_c" name="entity_address_c">
                    </li>
                    <li class="list-group-item d-flex justify-content-between align-items-center p-1">
                        <label class="form-label fw-semibold me-4">WhatsApp:</label>
                        <input class="form-control form-control-sm ms-auto" type="text" id="entity_whatsapp_c" name="entity_whatsapp_c">
                    </li>
                </ul>
            </div>
        </div>

        <button type="submit" class="btn btn-sm btn-outline-primary mt-3">Create Entity</button>
    </form>

    <p id="responseMessage"></p>
    
<script>
    document.getElementById("createEntityForm").addEventListener("submit", async function(event) {
        event.preventDefault(); // Prevent form reload

        let token = getAccessTokenFromCookie();

        let entityData = {
            entity_name: document.getElementById("entity_name_c").value,
            entity_phone: document.getElementById("entity_phone_c").value,
            entity_whatsapp: document.getElementById("entity_whatsapp_c").value,
            entity_address: document.getElementById("entity_address_c").value
        };

        let response = await fetch("/api/ent/", {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
                "Authorization": `Bearer ${token}`
            },
            body: JSON.stringify(entityData)
        });

        let result = await response.json();

        if (response.ok) {
            document.getElementById("responseMessage").innerText = "Entity created successfully!";
            await loadUserInfo();
        } else {
            document.getElementById("responseMessage").innerText = result.detail || "Failed to create entity.";
        }
    });
</script>