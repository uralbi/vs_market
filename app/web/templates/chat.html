{% extends "base.html" %}

{% block content %}


<div class="pagetitle">
    <h1>Сообщения</h1>
    <nav>
      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="/">Главная</a></li>
        <li class="breadcrumb-item"><a href="/about">Профайл</a></li>
        <li class="breadcrumb-item">Сообщения</li>
      </ol>
    </nav>
  </div>

<div class="p-2">
  <div class="mb-3">
      <p id="chat_title"> Тема : {{ product }}</p> 
      <h5 id="chat_username"></h5> 
  </div>

  <div class="chat-box border p-3" id="chatBox" style="max-height: 400px; overflow-y: auto;"></div>

  <div class="input-group mt-3">
      <input type="text" id="messageInput" class="form-control" placeholder="Type a message">
      <button class="btn btn-success" id="sendMessageBtn">Send</button>
  </div>
</div>

<script>
    const urlParams = new URLSearchParams(window.location.search);
    let room_id = urlParams.get("room_id");
     if (!room_id){
        room_id = "{{room_id}}"
    }
    const productName = "{{product}}"

    document.getElementById("messageInput").addEventListener("keypress", function (event) {
      if (event.key === "Enter") {
          event.preventDefault(); // Prevents new line in input
          document.getElementById("sendMessageBtn").click(); // Triggers button click
      }
    });
</script>
<script src="{{ url_for('static', path='/chat.js') }}" defer></script>

{% endblock %}